let Kili={apiSettings:null,hiddenClass:"hidden",isActivated:!1,isClassicEditorEnabled:!1,isDebuggingOn:!1,isGutenbergEditorEnabled:!1,postId:0,getApiSettings:()=>Kili.apiSettings,getCurrentPostId:()=>Kili.postId,init:()=>{Kili.setApiSettings(),Kili.setCurrentPostId()},setApiSettings:()=>{Kili.apiSettings=JSON.parse(JSON.stringify(wpApiSettings)),Kili.apiSettings.customApiRoute="api/v1/"},setCurrentPostId:()=>{const i=Kili.utils.parsedLocation();i&&i.post&&(Kili.postId=parseInt(i.post))}};Kili.Ajax={checkIfKiliWasActivated:()=>{let i=fetch("/wp-json/"+Kili.getApiSettings().customApiRoute+"post-has-kili/"+Kili.getCurrentPostId());i.then(i=>i.json()).then(i=>{Kili.UserInterface.setKiliStatus("active"==i),Kili.UserInterface.changeStatusCheck()})},updatePostMeta:()=>{const i={method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id:Kili.getCurrentPostId(),value:Kili.UserInterface.isKiliActive()?"active":"inactive"})},e="/wp-json/"+Kili.getApiSettings().customApiRoute+"set-post-kili/";let t=fetch(e,i);t.then(i=>i.json()).then(i=>{if(Kili.isDebuggingOn){let e=1==i?"2274A5":"D33F49";console.log("%c Info ","color: white; background-color: #"+e+"; border-radius: 4px;",message)}}).catch(i=>{Kili.isDebuggingOn&&console.log("%c Error ","color: white; background-color: #D33F49; border-radius: 4px;","Error updating meta: "+i)})}},Kili.UserInterface={changeStatusCheck:()=>{Kili.isActivated&&(document.querySelector(".js-toggle-kili").checked=Kili.isActivated,Kili.UserInterface.toggleEditorVisibility(),Kili.UserInterface.updateCheckboxUI())},checkActiveEditor:()=>{document.querySelector("#titlediv")?Kili.isClassicEditorEnabled=!0:Kili.isGutenbergEditorEnabled=!0},init:()=>{Kili.UserInterface.isActiveAnyEditor()&&(Kili.UserInterface.checkActiveEditor(),Kili.UserInterface.insertButtonInPostInterface())},insertButtonInPostInterface:()=>{let i=".edit-post-header__settings";const e='<div class="'+(Kili.isClassicEditorEnabled?"misc-pub-section":"components-button")+' enable-kili-toggle"><label class="enable-kili-toggle__title" for="js-toggle-kili">'+KiliStrings.enableKili+'</label> <label><input type="checkbox" id="enable_kili" name="enable_kili" value="1" class="acf-switch-input js-toggle-kili" autocomplete="off"><div class="acf-switch js-kili-switch"><span class="acf-switch-on">'+KiliStrings.yes+'</span><span class="acf-switch-off">'+KiliStrings.no+'</span><div class="acf-switch-slider"></div></div></label></div>';Kili.isClassicEditorEnabled&&(i="#misc-publishing-actions"),document.querySelector(i).insertAdjacentHTML("beforeend",e)},isActiveAnyEditor:()=>{const i=Kili.utils.parsedLocation();return"undefined"!=typeof wpActiveEditor&&void 0!==i.post&&("page"===pagenow||"post"===pagenow)},isKiliActive:()=>Kili.isActivated,setKiliStatus:i=>{Kili.isActivated=i},toggleClassicEditor:()=>{document.querySelector("#postdivrich").classList.toggle(Kili.hiddenClass)},toggleEditor:i=>{Kili.UserInterface.isActiveAnyEditor()&&(Kili.UserInterface.toggleEditorVisibility(),Kili.isActivated=i.target.checked,Kili.Ajax.updatePostMeta(),Kili.UserInterface.updateCheckboxUI())},toggleEditorVisibility:()=>{Kili.isClassicEditorEnabled?Kili.UserInterface.toggleClassicEditor():Kili.isGutenbergEditorEnabled&&Kili.UserInterface.toggleGutenbergEditor()},toggleGutenbergEditor:()=>{document.querySelector(".edit-post-visual-editor").classList.toggle(Kili.hiddenClass)},updateCheckboxUI:()=>{Kili.isActivated?document.querySelector(".js-kili-switch").classList.add("-on"):document.querySelector(".js-kili-switch").classList.remove("-on")}},Kili.utils={parsedLocation:()=>{if(void 0===location.search)return;const i=location.search.substring(1).split("&");let e={};for(let s=0;s<i.length;s++){let l=i[s].split("="),o=decodeURIComponent(l[0]),n=decodeURIComponent(l[1]);if(void 0!==e[o])if("string"!=typeof e[o])e[o].push(decodeURIComponent(n));else{var t=[e[o],decodeURIComponent(n)];e[o]=t}else e[o]=decodeURIComponent(n)}return e}},document.addEventListener("DOMContentLoaded",()=>{Kili.UserInterface.init(),Kili.UserInterface.isActiveAnyEditor()&&(Kili.init(),Kili.Ajax.checkIfKiliWasActivated())}),document.addEventListener("change",i=>{i.target.className.indexOf("js-toggle-kili")>-1&&Kili.UserInterface.toggleEditor(i)});