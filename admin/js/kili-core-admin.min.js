let Kili={apiSettings:null,hiddenClass:"hidden",isActivated:!1,isClassicEditorEnabled:!1,isGutenbergEditorEnabled:!1,postId:0,getApiSettings:()=>Kili.apiSettings,getCurrentPostId:()=>Kili.postId,init:()=>{Kili.setApiSettings(),Kili.setCurrentPostId()},setApiSettings:()=>{Kili.apiSettings=JSON.parse(JSON.stringify(wpApiSettings)),Kili.apiSettings.customApiRoute="api/v1/"},setCurrentPostId:()=>{const i=Kili.utils.parsedLocation();i&&i.post&&(Kili.postId=parseInt(i.post))}};Kili.Ajax={checkIfKiliWasActivated:()=>{let i=fetch("/wp-json/"+Kili.getApiSettings().customApiRoute+"post-has-kili/"+Kili.getCurrentPostId());i.then(i=>i.json()).then(i=>{Kili.Basic.setKiliStatus("active"==i),Kili.Basic.changeStatusCheck()})},updatePostMeta:()=>{const i={method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id:Kili.getCurrentPostId(),value:Kili.Basic.isKiliActive()?"active":"inactive"})};let t=fetch("/wp-json/"+Kili.getApiSettings().customApiRoute+"set-post-kili/",i);t.then(i=>i.json()).then(i=>{let t=1==i?"2274A5":"D33F49";console.log("%c Info ","color: white; background-color: #"+t+"; border-radius: 4px;",(1==i?"Successful":"Failed")+" operation")}).catch(i=>{console.log("%c Error ","color: white; background-color: #D33F49; border-radius: 4px;","Error updating meta: "+i)})}},Kili.Basic={changeStatusCheck:()=>{Kili.isActivated&&(document.querySelector(".js-toggle-kili").checked=Kili.isActivated,Kili.isClassicEditorEnabled?Kili.Basic.toggleClassicEditor():Kili.isGutenbergEditorEnabled&&Kili.Basic.toggleGutenbergEditor(),Kili.Basic.updateCheckboxUI())},checkActiveEditor:()=>{document.querySelector("#titlediv")?Kili.isClassicEditorEnabled=!0:Kili.isGutenbergEditorEnabled=!0},init:()=>{Kili.Basic.isActiveAnyEditor()&&(Kili.Basic.checkActiveEditor(),Kili.Basic.insertButtonInPostInterface())},insertButtonInPostInterface:()=>{let i=".edit-post-header__settings";const t='<div class="'+(Kili.isClassicEditorEnabled?"misc-pub-section":"components-button")+' enable-kili-toggle"><label class="enable-kili-toggle__title" for="js-toggle-kili">'+KiliStrings.enableKili+'</label> <label><input type="checkbox" id="enable_kili" name="enable_kili" value="1" class="acf-switch-input js-toggle-kili" autocomplete="off"><div class="acf-switch js-kili-switch"><span class="acf-switch-on">'+KiliStrings.yes+'</span><span class="acf-switch-off">'+KiliStrings.no+'</span><div class="acf-switch-slider"></div></div></label></div>';Kili.isClassicEditorEnabled&&(i="#misc-publishing-actions"),document.querySelector(i).insertAdjacentHTML("beforeend",t)},isActiveAnyEditor:()=>{const i=Kili.utils.parsedLocation();return"undefined"!=typeof wpActiveEditor&&void 0!==i.post&&("page"===pagenow||"post"===pagenow)},isKiliActive:()=>Kili.isActivated,setKiliStatus:i=>{Kili.isActivated=i},toggleClassicEditor:()=>{document.querySelector("#postdivrich").classList.toggle(Kili.hiddenClass)},toggleEditor:i=>{Kili.Basic.isActiveAnyEditor()&&(Kili.isClassicEditorEnabled?Kili.Basic.toggleClassicEditor():Kili.isGutenbergEditorEnabled&&Kili.Basic.toggleGutenbergEditor(),Kili.isActivated=i.target.checked,Kili.Ajax.updatePostMeta(),Kili.Basic.updateCheckboxUI())},toggleGutenbergEditor:()=>{document.querySelector(".edit-post-visual-editor").classList.toggle(Kili.hiddenClass)},updateCheckboxUI:()=>{Kili.isActivated?document.querySelector(".js-kili-switch").classList.add("-on"):document.querySelector(".js-kili-switch").classList.remove("-on")}},Kili.utils={parsedLocation:()=>{if(void 0===location.search)return;const i=location.search.substring(1).split("&");let t={};for(let s=0;s<i.length;s++){const l=i[s].split("="),o=decodeURIComponent(l[0]),c=decodeURIComponent(l[1]);if(void 0!==t[o])if("string"!=typeof t[o])t[o].push(decodeURIComponent(c));else{var e=[t[o],decodeURIComponent(c)];t[o]=e}else t[o]=decodeURIComponent(c)}return t}},function(i){"use strict";i(window).load(()=>{Kili.Basic.init(),Kili.Basic.isActiveAnyEditor()&&(Kili.init(),Kili.Ajax.checkIfKiliWasActivated())}),i(document).on("change",".js-toggle-kili",Kili.Basic.toggleEditor)}(jQuery);