let Kili={apiSettings:null,hiddenClass:"hidden",isActivated:!1,isClassicEditorEnabled:!1,isDebuggingOn:!1,isGutenbergEditorEnabled:!1,postId:0,getApiSettings:()=>Kili.apiSettings,getCurrentPostId:()=>Kili.postId,init:()=>{Kili.setApiSettings(),Kili.setCurrentPostId()},setApiSettings:()=>{Kili.apiSettings=JSON.parse(JSON.stringify(wpApiSettings)),Kili.apiSettings.customApiRoute="api/v1/"},setCurrentPostId:()=>{const i=Kili.utils.parsedLocation();i&&i.post&&(Kili.postId=parseInt(i.post))}};Kili.Ajax={checkIfKiliWasActivated:()=>{const i=Kili.Ajax.getBaseRoute();let e=fetch(i+"post-has-kili/"+Kili.getCurrentPostId());e.then(i=>i.json()).then(i=>{Kili.UserInterface.setKiliStatus("active"==i),Kili.UserInterface.changeStatusCheck()})},getBaseRoute:()=>{const i=Kili.getApiSettings();return i.root+i.customApiRoute},updatePostMeta:()=>{const i={method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id:Kili.getCurrentPostId(),value:Kili.UserInterface.isKiliActive()?"active":"inactive"})},e=Kili.Ajax.getBaseRoute();let t=fetch(e+"set-post-kili/",i);t.then(i=>i.json()).then(i=>{let e=1==i?KiliStrings.toggleKiliSuccess:KiliStrings.toggleKiliError;if(wp.a11y.speak(e,"polite"),Kili.isDebuggingOn){let t=1==i?"2274A5":"D33F49";console.log("%c Info ","color: white; background-color: #"+t+"; border-radius: 4px;",e)}}).catch(i=>{wp.a11y.speak(KiliStrings.toggleKiliError,"assertive"),Kili.isDebuggingOn&&console.log("%c Error ","color: white; background-color: #D33F49; border-radius: 4px;","Error updating meta: "+i)})}},Kili.UserInterface={changeStatusCheck:()=>{Kili.UserInterface.updateCheckboxUI(),Kili.isActivated&&(document.querySelector(".js-toggle-kili").checked=Kili.isActivated,Kili.UserInterface.toggleEditorVisibility())},checkActiveEditor:()=>{document.querySelector("#titlediv")?Kili.isClassicEditorEnabled=!0:Kili.isGutenbergEditorEnabled=!0},init:()=>{Kili.UserInterface.isActiveAnyEditor()&&(Kili.UserInterface.checkActiveEditor(),Kili.UserInterface.insertButtonInPostInterface())},insertButtonInPostInterface:()=>{if(Kili.isClassicEditorEnabled)return;const i='<div class="'+(Kili.isClassicEditorEnabled?"misc-pub-section":"components-button")+' enable-kili-toggle"><label class="enable-kili-toggle__title" for="js-toggle-kili">'+KiliStrings.enableKili+'</label> <label><input type="checkbox" id="enable_kili" name="enable_kili" value="1" class="acf-switch-input js-toggle-kili" autocomplete="off" aria-label="'+KiliStrings.enableKili+'"><div class="acf-switch js-kili-switch"><span class="acf-switch-on">'+KiliStrings.yes+'</span><span class="acf-switch-off">'+KiliStrings.no+'</span><div class="acf-switch-slider"></div></div></label></div>';document.querySelector(".edit-post-header__settings").insertAdjacentHTML("beforeend",i)},isActiveAnyEditor:()=>{const i=Kili.utils.parsedLocation();return"undefined"!=typeof wpActiveEditor&&(void 0!==i.post||Kili.utils.isNewPostPage())&&("page"===pagenow||"post"===pagenow)},isKiliActive:()=>Kili.isActivated,setKiliStatus:i=>{Kili.isActivated=i},toggleClassicEditor:()=>{document.querySelector("#postdivrich")&&document.querySelector("#postdivrich").classList.toggle(Kili.hiddenClass)},toggleEditor:i=>{Kili.UserInterface.isActiveAnyEditor()&&(Kili.UserInterface.toggleEditorVisibility(),Kili.isActivated=i.target.checked,Kili.Ajax.updatePostMeta(),Kili.UserInterface.updateCheckboxUI())},toggleEditorVisibility:()=>{Kili.isClassicEditorEnabled?Kili.UserInterface.toggleClassicEditor():Kili.isGutenbergEditorEnabled&&Kili.UserInterface.toggleGutenbergEditor()},toggleGutenbergEditor:()=>{document.querySelector(".edit-post-sidebar__panel-tab").click(),document.querySelector(".edit-post-visual-editor").classList.toggle(Kili.hiddenClass)},updateCheckboxUI:()=>{let i=Kili.isActivated?KiliStrings.kiliIsEnabled:KiliStrings.kiliIsDisabled,e=Kili.isActivated?KiliStrings.disableKili:KiliStrings.enableKili;wp.a11y.speak(i,"polite"),document.querySelector(".js-toggle-kili").setAttribute("aria-label",e),Kili.isActivated?document.querySelector(".js-kili-switch").classList.add("-on"):document.querySelector(".js-kili-switch").classList.remove("-on")}},Kili.utils={isNewPostPage:()=>{let i=window.location.href,e=!1;return i.indexOf("post-new.php?post_type=")>-1&&(e=!0),e},parsedLocation:()=>{if(void 0===location.search)return;const i=location.search.substring(1).split("&");let e={};for(let s=0;s<i.length;s++){let l=i[s].split("="),o=decodeURIComponent(l[0]),n=decodeURIComponent(l[1]);if(void 0!==e[o])if("string"!=typeof e[o])e[o].push(decodeURIComponent(n));else{var t=[e[o],decodeURIComponent(n)];e[o]=t}else e[o]=decodeURIComponent(n)}return e}},document.addEventListener("DOMContentLoaded",()=>{Kili.UserInterface.init(),Kili.UserInterface.isActiveAnyEditor()&&(Kili.init(),Kili.Ajax.checkIfKiliWasActivated())}),document.addEventListener("change",i=>{i.target.className.indexOf("js-toggle-kili")>-1&&Kili.UserInterface.toggleEditor(i)});